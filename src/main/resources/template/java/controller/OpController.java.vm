package ${controllerPackage};

import .platform.stage.mbiz.ApiIntfConfig;
import io.linlan.platform.stage.mbiz.constant.HttpStatusEnum;
import ${viewPackage}.manager.${className}OpManager;
import ${viewPackage}.vo.${className}Vo;
import io.linlan.commons.core.ResponseResult;
import io.linlan.commons.core.annotation.MemberLog;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

/**
 *
 * ${className}控制域:${comments}增删改操作控制类
 * <br>
 * @author ${author}
 * CreateTime ${datetime}<br>
 * <br>
 * @version 1.0<br>
 * @since 1.0<br>
 *
 */
@RestController
@RequestMapping("api/plat/op/${classGroup}")
public class ${className}OpController {

    @Autowired
    private ${className}OpManager ${classname}OpManager;

    /** ${className} Operation. ${className}数据操作逻辑，根据操作类型，执行新增、修改、删除、初始化、导出、导入等各类操作.
     * @param action 操作类型:10,新增;20,修改;40,删除|10
     * @param id #foreach($column in $columns)#if($column.columnName == $pk.columnName)$column.comments#end#end:null;1;1,2,3|1
     * @param input 对象信息，输入Vo对象
     * @return {@link String}:操作成功0;操作失败1
     */
    @MemberLog("检查对象${className}数据操作逻辑，根据操作类型，执行新增、修改、删除、初始化、导出、导入等操作")
    @PostMapping("${sname}/{action}/{id}")
    public ResponseResult<String> ${classname}Op(@PathVariable(value = "action") String action,
                                               @PathVariable(value = "id") String id,
                                               @RequestBody ${className}Vo input) {
        if (${classname}OpManager.do${className}Op(action, id, input)){
            return ResponseResult.ok().setResultData(ApiIntfConfig.SUCCESS);
        }
        return ResponseResult.error(HttpStatusEnum.PARAMETER_ERROR.getCode(), HttpStatusEnum.PARAMETER_ERROR.getMsg())
                .setResultData(ApiIntfConfig.FAILURE);
    }

}
